"use strict";(self.webpackChunkapp_web_react=self.webpackChunkapp_web_react||[]).push([[1648],{79015:function(e,t,a){var n=a(1413),r=a(72791),s=a(69912),i=a(94724),l=a(61134),o=a(70084),d=a(80184),c=o.ZP.vw,m=o.ZP.vh,p=r.forwardRef((function(e,t){return(0,d.jsxs)(s.NI,{isRequired:e.isRequired,isInvalid:e.invalid,isReadOnly:e.isReadOnly||!1,style:(0,n.Z)({height:m(48)},e.style),children:[e.label&&(0,d.jsx)(s.NI.Label,{style:(0,n.Z)({fontSize:c(13),fontFamily:"Poppins_medium",color:e.invalid?"red.500":"rgba(102, 102, 102, 0.7)",height:m(19)},e.labelstyle),children:e.label}),(0,d.jsx)(l.Qr,{control:e.control,rules:e.rules,name:e.name,style:{zIndex:1},render:function(a){var n=a.field,r=n.onChange,s=(n.onBlur,n.value);return(0,d.jsx)(i.II,{isReadOnly:e.isReadOnly||!1,ref:t,size:e.size||"lg",multiline:e.multiline||!1,numberOfLines:e.numberOfLines||1,minLength:e.minLength||1,maxLength:e.maxLength||255,isInvalid:e.invalid,autoComplete:"off",autoFocus:e.autoFocus||!1,type:e.type||"text",onSubmitEditing:e.onSubmitEditing,onKeyPress:e.onKeyPress,onChangeText:function(t){r(t),e.onChangeText&&e.onChangeText()},value:s||"",variant:"outline",invalidOutlineColor:"red.300",focusOutlineColor:"rgba(0, 0, 0, 0.15)",_invalid:{borderColor:"red.300",borderWidth:"1"},_light:{borderWidth:"1"},_dark:{borderWidth:"1"},_web:{borderWidth:"1"},style:{fontSize:c(15),fontFamily:"Poppins_medium",backgroundColor:"white",zIndex:1,height:e.height||m(36)},InputLeftElement:e.leftIcon||null,InputRightElement:e.rightIcon||null,placeholder:e.placeholder})}}),(0,d.jsx)(s.NI.ErrorMessage,{style:{marginTop:m(-3)},children:e.error}),(0,d.jsx)(s.NI.HelperText,{style:{marginTop:m(-3)},children:e.help})]})}));t.Z=p},678:function(e,t,a){var n=a(1413),r=(a(72791),a(69912)),s=a(82664),i=a(61134),l=a(70084),o=a(65785),d=a(80184);t.Z=function(e){return(0,d.jsxs)(r.NI,{isInvalid:e.invalid,style:(0,n.Z)({height:(0,l.vh)(48)},e.style),children:[e.label&&(0,d.jsx)(r.NI.Label,{style:{fontSize:(0,l.vw)(13),fontFamily:"Poppins_medium",color:e.invalid?"red.500":"rgba(102, 102, 102, 0.7)",height:(0,l.vh)(19)},children:e.label}),(0,d.jsx)(i.Qr,{control:e.control,rules:e.rules,name:e.name,render:function(t){var a=t.field,r=a.onChange;a.onBlur,a.value;return(0,d.jsx)(s.Z,(0,n.Z)((0,n.Z)({onTrackColor:o.Z.primary,style:{marginTop:(0,l.vh)(10)},size:"md"},e),{},{onToggle:function(t){e.isChanged(t),r(t)},colorScheme:"purple"}))}}),(0,d.jsx)(r.NI.ErrorMessage,{style:{marginTop:(0,l.vh)(-3)},children:e.error})]})}},65785:function(e,t){t.Z={primary:"rgba(125, 43, 233, 1)",accent:"#FFC107"}},71648:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var n=a(74165),r=a(15861),s=a(70885),i=a(72791),l=a(74222),o=a(26686),d=a(18227),c=a(95417),m=a(60961),p=a(11638),u=a(25492),h=a(55045),f=a(68129),v=a(29996),g=a(59434),y=a(16871),x=a(70084),b=a(65785),j=a(14071),Z=a(69261),w=a(75247),C=a(80184),S=function(e){var t=e.item,a=e.setIsOpen,s=(0,g.I0)();return(0,C.jsx)(m.ZP,{onPress:(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:w.bl,data:t});case 2:a(!0);case 3:case"end":return e.stop()}}),e)}))),children:(0,C.jsxs)(l.Z,{style:{boxShadow:"0px 3px 10px #0000001A",width:(0,x.vw)(345),height:(0,x.vh)(100),marginHorizontal:(0,x.vw)(20),marginVertical:(0,x.vh)(10),borderRadius:(0,x.vw)(10),backgroundColor:"white"},children:[(0,C.jsx)(d.Z,{style:{marginHorizontal:(0,x.vw)(10),marginTop:(0,x.vh)(5),color:b.Z.primary,fontFamily:"Poppins_medium",fontSize:(0,x.vw)(15)},children:t.name}),(0,C.jsx)(d.Z,{style:{marginTop:(0,x.vh)(5),marginHorizontal:(0,x.vw)(10),color:"rgba(0,0,0, 0.5)",fontFamily:"Poppins",fontSize:(0,x.vw)(11)},children:t.description}),(0,C.jsxs)(o.Z,{style:{marginTop:(0,x.vh)(6),marginHorizontal:(0,x.vw)(10)},justifyContent:"space-between",children:[(0,C.jsx)(d.Z,{style:{color:"#686868",fontFamily:"Poppins",fontSize:(0,x.vw)(13)},children:t.send_mode}),(0,C.jsx)(m.ZP,{onPress:function(){},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(13),fontFamily:"Poppins",color:b.Z.primary},children:t.default?t.team===t.createdUser._id?"Team Default":"Default":""})})]})]})})},P=i.memo(S),_=a(56798),z=a(42982),k=a(20520),T=a(61134),B=a(763),I=a.n(B),O=a(72426),F=a.n(O),L=a(79015),A=a(678),E=a(23093),H=a(93142),q=a(70793),N=a(44843),R=function(e){var t=e.isOpen,a=e.setIsOpen,v=e.templates,Z=(0,p.S)({base:"base",sm:"sm",lg:"lg",md:"md",xl:"xl"}),w=(0,y.s0)(),S=(0,u.pm)(),P=(0,g.I0)(),_=i.useRef(null),B=i.useState(!1),O=(0,s.Z)(B,2),R=O[0],D=O[1],W=(0,i.useCallback)((function(){return a(!1)}),[a]),M=function(){return D(!1)},V=(0,i.useState)({header:"",desc:"",nolabel:"No",yeslabel:"Yes",yes:function(){},no:W}),K=(0,s.Z)(V,2),Y=K[0],G=K[1],Q=(0,g.v9)((function(e){return e.campaigns})).currentCampaign,U=(0,i.useState)(Q&&Q.steps||[{active:!0,postcardtemplate:"not-send",postcardrepeat:!1,postcardevery:"",postcards:"",emailtemplate:"not-send",emailrepeat:!1,emailevery:"",emails:"",sendtime:""}]),X=(0,s.Z)(U,2),J=X[0],$=X[1],ee=(0,i.useState)(!1),te=(0,s.Z)(ee,2),ae=te[0],ne=te[1],re=(0,i.useState)(!1),se=(0,s.Z)(re,2),ie=se[0],le=se[1],oe=(0,i.useState)(!1),de=(0,s.Z)(oe,2),ce=de[0],me=de[1],pe=J.find((function(e){return e.active})),ue=(0,T.cI)({mode:"onChange",defaultValues:I().isEmpty(Q)?{name:"",description:"",default:!1,send_mode:"Attach Automatically",postcardtemplate:"not-send",postcardrepeat:!1,postcardevery:"",postcards:"",emailtemplate:"not-send",emailrepeat:!1,emailevery:"",emails:"",sendtime:""}:{name:Q.name,description:Q.description,default:Q.default,send_mode:Q.send_mode,postcardtemplate:pe&&pe.postcardtemplate?pe.postcardtemplate:"not-send",postcardrepeat:!(!pe||!pe.postcardrepeat)&&pe.postcardrepeat,postcardevery:pe&&pe.postcardevery?pe.postcardevery:"",postcards:pe&&pe.postcards?pe.postcards:"",emailtemplate:pe&&pe.emailtemplate?pe.emailtemplate:"not-send",emailrepeat:!(!pe||!pe.emailrepeat)&&pe.emailrepeat,emailevery:pe&&pe.emailevery?pe.emailevery:"",emails:pe&&pe.emails?pe.emails:"",sendtime:pe&&pe.sendtime?pe.sendtime:""}}),he=ue.control,fe=ue.handleSubmit,ve=ue.formState.errors,ge=ue.getValues,ye=ue.setValue,xe=ue.trigger,be=ge("send_mode"),je=(0,i.useCallback)((function(e,t){S.show({placement:"top",render:function(){var a="red.300";return"error"===e?a="red.300":"success"===e?a="green.300":"info"===e?a="blueGray.300":"warning"===e&&(a="orange.300"),(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(12),fontFamily:"Poppins_medium",color:"#33214B"},p:2,bg:a,rounded:"full",children:t})}})}),[S]),Ze=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r,s,i,l,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=J.filter((function(e){return"not-send"===e.postcardtemplate&&"not-send"===e.emailtemplate})))&&a.length>0)){e.next=5;break}return je("error","No template selected in one of the steps."),le(!1),e.abrupt("return");case 5:return r={name:t.name,description:t.description,default:t.default,send_mode:t.send_mode,steps:J.map((function(e,t){return e.step=t+1,e}))},Q&&Q._id&&(r._id=Q._id),s=Q?j.hm(r):j.mK(r),i=!1,Q&&(delete(l=Q).active,delete l.team,delete l.createdUser,i=I().isEqual(l,r)),o=r._id?"Campaign updated successfully.":"Campaign created successfully.",e.prev=11,e.next=14,P(s);case 14:0,je("success",o),le(!1),Q?i?W():(G({header:"Attention!",desc:"Saved changes to the campaign take effect on newly added properties or to properties that you manually add/edit in campaign config.",nolabel:"Okay",yeslabel:"",yes:function(){},no:W}),D(!0)):W(),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(11),console.log("Created Error",e.t0),je("error",e.t0.message),le(!1);case 25:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){ie&&fe(Ze,(function(){le(!1)}))()}),[ie]),(0,i.useEffect)((function(){"Attach Manually"===ge("send_mode")&&(ye("postcardrepeat",!1),xe("postcardrepeat"),ye("emailrepeat",!1),xe("emailrepeat"),me(!0))}),[be,ge,ye,xe]),(0,i.useEffect)((function(){ce&&function(){var e=J,t=e.findIndex((function(e){return!0===e.active}));e[t]={active:!0,postcards:ge&&ge("postcards")&&ge("postcards").toString(),postcardrepeat:ge&&ge("postcardrepeat"),postcardevery:ge&&ge("postcardevery")&&ge("postcardevery").toString(),postcardtemplate:ge&&ge("postcardtemplate"),emails:ge&&ge("emails")&&ge("emails").toString(),sendtime:ge&&ge("sendtime")&&ge("sendtime").toString(),emailrepeat:ge&&ge("emailrepeat")&&ge("emailrepeat"),emailevery:ge&&ge("emailevery")&&ge("emailevery").toString(),emailtemplate:ge&&ge("emailtemplate")},me(!1),$(e)}()}),[ge,ce,J]);var we=function(){var e=J.filter((function(e){return!e.active})),t=e[e.length-1];e[e.length-1].active=!0,t.active=!0,ye("postcardtemplate",t.postcardtemplate?t.postcardtemplate:"not-send"),ye("emailtemplate",t.emailtemplate?t.emailtemplate:"not-send"),ye("postcardevery",t.postcardevery),ye("emailevery",t.emailevery),ye("postcards",t.postcards),ye("emails",t.emails),ye("sendtime",t.sendtime),$(e),je("success","Step deleted successfully."),D(!1)},Ce=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q||!Q._id){e.next=14;break}return ne(!0),e.prev=2,t=j.bO(Q._id),e.next=6,P(t);case 6:je("success","Campaign deleted successfully."),w("/campaigns"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),"CAMPAIGN-ATTACHED"===e.t0.message?(G({header:"Sorry!",desc:"Cannot delete campaign used by one or more properties, you can only delete campaigns that are not assigned to any property.",nolabel:"Okay",yeslabel:"",yes:function(){},no:W}),a(!0)):je("err",e.t0.message),ne(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();if(0===v.length)return(0,C.jsxs)(h.Z,{flex:1,children:[(0,C.jsx)(d.Z,{children:"An error occurred!"}),(0,C.jsx)(k.z,{style:{color:b.Z.primary,margin:5,paddingHorizontal:5},onPress:function(){},children:(0,C.jsx)(d.Z,{style:{color:"white"},children:"No templates Found."})})]});var Se=[{name:"Not send mail",_id:"not-send",templatetype:"postcard"}].concat((0,z.Z)(v)).filter((function(e){return"postcard"===e.templatetype})).map((function(e){return{label:e.name,value:e._id}})),Pe=[{name:"Not send email",_id:"not-send",templatetype:"email"}].concat((0,z.Z)(v)).filter((function(e){return"email"===e.templatetype})).map((function(e){return{label:e.name,value:e._id}})),_e=["Attach Automatically","Attach Manually","Stop Sending"].map((function(e){return{label:e,value:e}})),ze=(0,z.Z)(Array(24).keys()).map((function(e){return{label:F()().startOf("day").add(e,"hours").format("HH:mm"),value:e.toString()}}));return ae?(0,C.jsx)(h.Z,{bg:"white",flex:1,children:(0,C.jsx)(f.Z,{size:"small",color:b.Z.primary})}):(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(l.Z,{bg:"white",mb:20,children:[(0,C.jsx)(N.default,{size:"xl",header:Q&&Q._id?"Edit Campaign":"Create Campaign",isOpen:t,close:function(){W()},isLoading:ie,save:function(){0===Object.keys(ve).length&&le(!0)},footerStyle:{justifyContent:"space-between"},buttons:(0,C.jsxs)(o.Z,{justifyContent:"space-between",width:"100%",space:2,children:[(0,C.jsx)(o.Z,{justifyContent:"flex-start",space:2,children:(0,C.jsx)(H.default,{space:2,label:"base"===Z||"sm"===Z?"+":"Add Step",onPress:function(){"not-send"!==pe.postcardtemplate||"not-send"!==pe.emailtemplate?function(){var e="not-send",t="not-send",a=J.map((function(e,t){return e.active=!1,e})).concat({active:!0,postcardtemplate:e,postcardrepeat:!1,postcardevery:"",postcards:"",emailtemplate:t,emailrepeat:!1,emailevery:"",emails:"",sendtime:""});ye("postcardtemplate",e),ye("emailtemplate",t),ye("postcardevery",""),ye("emailevery",""),ye("postcards",""),ye("emails",""),ye("sendtime",""),$(a)}():je("error","Please select a template in the current step to add a new one.")},style:{height:(0,x.vh)(36)}})}),(0,C.jsxs)(o.Z,{justifyContent:"flex-end",space:2,children:[Q&&Q._id&&(0,C.jsx)(H.default,{space:2,variant:"outline",label:"base"===Z||"sm"===Z?"X":"Delete",style:{height:(0,x.vh)(36),backgroundColor:"rgba(255,0,0,0.3)"},onPress:function(){G({header:"Delete!",desc:"Are you sure you want to delete this campaign?",nolabel:"No",yeslabel:"Yes",yes:Ce,no:M}),D(!0)}}),(0,C.jsx)(H.default,{space:2,color:b.Z.primary,variant:"outline",label:"Cancel",onPress:function(){W()},style:{height:(0,x.vh)(36)}}),(0,C.jsx)(H.default,{space:3,label:"Save",isLoading:ie,style:{height:(0,x.vh)(36)},onPress:function(){"not-send"!==pe.postcardtemplate||"not-send"!==pe.emailtemplate?0===Object.keys(ve).length&&le(!0):je("error","Please select a template in the current step to save this campaign.")}})]})]}),children:(0,C.jsxs)(l.Z,{style:{zoom:"90%"},children:[(0,C.jsx)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"94vw":(0,x.vw)(612),justifyContent:"space-between",marginBottom:(0,x.vh)(20)},children:(0,C.jsx)(L.Z,{name:"name",label:"Campaign Name",placeholder:"Campaign Name",control:he,rules:{required:{value:!0,message:"Campaign name is required"}},invalid:!!ve.name,error:ve.name?ve.name.message:"",inputStyle:{}})}),(0,C.jsx)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"94vw":(0,x.vw)(612),justifyContent:"space-between",marginVertical:(0,x.vh)(20)},children:(0,C.jsx)(L.Z,{name:"description",label:"Campaign Description",placeholder:"Campaign Description",control:he,rules:{required:{value:!0,message:"Campaign Description is required"}},invalid:!!ve.description,error:ve.description?ve.description.message:"",inputStyle:{}})}),(0,C.jsxs)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"45.5vw":(0,x.vw)(300),justifyContent:"space-between",marginTop:(0,x.vh)(20),marginBottom:(0,x.vh)(40)},children:[(0,C.jsx)(E.Z,{control:he,items:_e,name:"send_mode",label:"Attach Mode",placeholder:"Select attach mode",invalid:!!ve.name,error:ve.name?ve.name.message:"",rules:{required:{value:!0,message:"Select attach mode"}}}),(0,C.jsx)(A.Z,{type:"switch",control:he,isChanged:function(e){ye("default",e),xe("default")},id:"default",name:"default",label:"Default campaign? ",isChecked:ge("default"),invalid:!!ve.default,error:ve.default?ve.default.message:"",rules:{}})]}),J.map((function(e,t){return(0,C.jsxs)(l.Z,{rounded:"md",style:{boxShadow:"0px 3px 5px #0000001A",backgroundColor:!1===e.active?"#eeeeee":"#fff",marginVertical:(0,x.vh)(10),paddingHorizontal:(0,x.vh)(20),paddingVertical:(0,x.vh)(10),width:"base"===Z||"sm"===Z?"94vw":(0,x.vw)(612)},children:[(0,C.jsx)(m.ZP,{onPress:function(){!function(e){if(1!==J.length||Q){var t=J.map((function(t,a){return a===e?(ye("postcardtemplate",t.postcardtemplate?t.postcardtemplate:"not-send"),ye("emailtemplate",t.emailtemplate?t.emailtemplate:"not-send"),ye("postcardrepeat",!!t.postcardrepeat&&t.postcardrepeat),ye("postcardevery",t.postcardevery?t.postcardevery:""),ye("postcards",t.postcards?t.postcards:""),ye("emailrepeat",!!t.emailrepeat&&t.emailrepeat),ye("emailevery",t.emailevery?t.emailevery:""),ye("emails",t.emails?t.emails:""),ye("sendtime",t.sendtime?t.sendtime:""),xe(),t.active=!t.active,t.postcardtemplate||(t.postcardtemplate="not-send"),t):(t.active=!1,t)}));$(t)}}(t)},style:{marginBottom:e.active?(0,x.vh)(10):0},children:(0,C.jsxs)(o.Z,{py:1,style:{borderBottomWidth:e.active?(0,x.vw)(2):0,borderBottomColor:"rgba(0,0,0, 0.15)",justifyContent:"space-between"},children:[(0,C.jsxs)(d.Z,{style:{marginLeft:5,fontFamily:"Poppins",fontSize:16,color:b.Z.primary},children:["Step ",t+1]}),(0,C.jsx)(h.Z,{children:(0,C.jsx)(q.Z,{})})]})}),!0===e.active&&(0,C.jsxs)(l.Z,{marginBottom:1===J.length?(0,x.vh)(10):0,children:[(0,C.jsxs)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"40vw":(0,x.vw)(280),justifyContent:"space-between",marginBottom:(0,x.vh)(10)},children:[(0,C.jsx)(E.Z,{control:he,items:Se,name:"postcardtemplate",id:"postcardtemplate",label:"Send mail with template",placeholder:"Select mail template",onChange:function(e){ye("postcardtemplate",e),xe("postcardtemplate"),ye("postcardrepeat",!1),xe("postcardrepeat"),me((function(e){return!e}))},invalid:!!ve.postcardtemplate,error:ve.postcardtemplate?ve.postcardtemplate.message:"",rules:{required:{value:!0,message:"Please select a mail template"}}}),(0,C.jsx)(A.Z,{isDisabled:"not-send"===e.postcardtemplate||"Attach Manually"===ge("send_mode"),control:he,isChanged:function(e){ye("postcardrepeat",e),xe("postcardrepeat"),me(!0)},id:"postcardrepeat",name:"postcardrepeat",label:"Repeat mail Sending? ",isChecked:e.postcardrepeat,invalid:!!ve.postcardrepeat,error:ve.postcardrepeat?ve.postcardrepeat.message:"",rules:{}})]}),!0===e.postcardrepeat&&(0,C.jsxs)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"40vw":(0,x.vw)(280),justifyContent:"space-between",marginVertical:(0,x.vh)(10)},children:[(0,C.jsx)(L.Z,{suffix:"Day(s)",control:he,id:"postcardevery",name:"postcardevery",label:"base"===Z||"sm"===Z?"Repeat sending":"Repeat sending every (in days)",placeholder:"21",maxLength:3,onChangeText:function(e){me(!0)},invalid:!!ve.postcardevery,error:ve.postcardevery?ve.postcardevery.message:"",rules:{required:{value:!0,message:"Mail repeat period is required"}}}),(0,C.jsx)(L.Z,{control:he,id:"postcards",name:"postcards",label:"Mails to send (in nos.) ",placeholder:"8",maxLength:4,required:!0,onChangeText:function(e){me(!0)},invalid:!!ve.postcards,error:ve.postcards?ve.postcards.message:"",rules:{required:{value:!0,message:"Mails to send is required"}}})]}),(0,C.jsxs)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"40vw":(0,x.vw)(280),justifyContent:"space-between",marginTop:(0,x.vh)(20),marginBottom:(0,x.vh)(10)},children:[(0,C.jsx)(E.Z,{control:he,items:Pe,name:"emailtemplate",id:"emailtemplate",label:"base"===Z||"sm"===Z?"Send template":"Send e-mail with template",placeholder:"Select e-mail template",onChange:function(e){ye("emailtemplate",e),xe("emailtemplate"),ye("emailrepeat",!1),xe("emailrepeat"),me((function(e){return!e}))},invalid:!!ve.emailtemplate,error:ve.emailtemplate?ve.emailtemplate.message:"",rules:{required:{value:!0,message:"Select an email template"}}}),(0,C.jsx)(A.Z,{isDisabled:"not-send"===e.emailtemplate,control:he,isChanged:function(e){ye("emailrepeat",e),xe("emailrepeat"),me(!0)},id:"emailrepeat",name:"emailrepeat",label:"Repeat e-mail sending? ",isChecked:e.emailrepeat,invalid:!!ve.emailrepeat,error:ve.emailrepeat?ve.emailrepeat.message:"",rules:{}})]}),!0===e.emailrepeat&&"not-send"!==e.emailtemplate&&(0,C.jsxs)(o.Z,{space:4,style:{width:"base"===Z||"sm"===Z?"40vw":(0,x.vw)(280),justifyContent:"space-between",marginTop:(0,x.vh)(10),marginBottom:(0,x.vh)(20)},children:[(0,C.jsx)(L.Z,{suffix:"Day(s)",control:he,id:"emailevery",name:"emailevery",label:"base"===Z||"sm"===Z?"Repeat sending":"Repeat sending every (in days)",placeholder:"21",maxLength:3,required:!0,onChangeText:function(e){me(!0)},invalid:!!ve.emailevery,error:ve.emailevery?ve.emailevery.message:"",rules:{required:{value:!0,message:"Repeat email every period is required"}}}),(0,C.jsx)(c._,{from:"md",children:(0,C.jsx)(L.Z,{suffix:"Nos(s)",control:he,id:"emails",name:"emails",label:"Emails to send (in nos.)",placeholder:"8",maxLength:4,onChangeText:function(e){me(!0)},invalid:!!ve.emails,error:ve.emails?ve.emails.message:"",rules:{required:{value:!0,message:"Email to send is required"}}})}),(0,C.jsx)(c._,{only:["base","sm"],children:(0,C.jsx)(o.Z,{space:2,children:(0,C.jsx)(L.Z,{style:{width:"34%"},suffix:"Nos(s)",control:he,id:"emails",name:"emails",label:"Emails to send (nos.)",placeholder:"8",maxLength:4,onChangeText:function(e){me(!0)},invalid:!!ve.emails,error:ve.emails?ve.emails.message:"",rules:{required:{value:!0,message:"Email to send is required"}}})})})]}),(0,C.jsx)(E.Z,{style:{width:"24%",marginTop:10,marginBottom:20},sameline:!0,suffix:" ",control:he,type:"select",items:ze,name:"sendtime",id:"sendtime",label:"Send Time",placeholder:"Select send time",onChange:function(e){me(!0)},invalid:!!ve.sendtime,error:ve.sendtime?ve.sendtime.message:"",rules:{required:{value:!0,message:"Select send time"}}})]}),J.length>1&&e.active&&(0,C.jsx)(h.Z,{style:{alignItems:"flex-end",paddingVertical:10,paddingRight:25},children:(0,C.jsx)(d.Z,{style:{color:"red",fontSize:10},onPress:function(){G({header:"Delete?",desc:"Are you sure you want to delete this Step?",nolabel:"No",yeslabel:"Yes",yes:we,no:W}),D(!0)},children:"Remove Step"})})]},"step"+t)}))]})}),(0,C.jsx)(N.default,{size:"md",isOpen:R,close:M,header:Y.header,buttons:(0,C.jsxs)(o.Z,{space:2,children:[(0,C.jsx)(H.default,{space:3,variant:"outline",label:Y.nolabel,onPress:Y.no,ref:_}),Y.yeslabel&&(0,C.jsx)(H.default,{space:3,label:Y.yeslabel,onPress:Y.yes})]}),children:(0,C.jsx)(d.Z,{style:{fontFamily:"Poppins",fontSize:(0,x.vw)(13),color:"rgba(0,0,0,0.8)"},children:Y.desc})})]})})},D=a(27074),W=function(e){e.listStyle,e.setListStyle;var t=e.navigate,a=e.setIsOpen,p=e.dispatch,u=e._showAlert,h=e.templates,f=(0,i.useState)(!1),v=(0,s.Z)(f,2),g=v[0],y=v[1];return(0,C.jsxs)(l.Z,{style:{marginHorizontal:(0,x.vw)(20),borderBottomColor:"rgba(0,0,0,0.15)",borderBottomWidth:1,marginTop:(0,x.vh)(-10)},children:[(0,C.jsxs)(o.Z,{justifyContent:"space-between",children:[(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(24),paddingTop:(0,x.vh)(30),width:(0,x.vw)(300),color:"#303030",fontFamily:"Poppins_medium",justifyContent:"flex-start"},children:"Campaigns"}),(0,C.jsx)(c._,{only:["sm","base"],children:(0,C.jsxs)(o.Z,{alignSelf:"center",children:[(0,C.jsx)(m.ZP,{onPress:function(){t("/campaigns")},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(15),paddingTop:(0,x.vh)(40),paddingHorizontal:10,color:b.Z.primary,fontFamily:"Poppins_medium",marginHorizontal:(0,x.vw)(25),paddingBottom:(0,x.vh)(13),borderBottomWidth:(0,x.vh)(4),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Campaigns"})}),(0,C.jsx)(m.ZP,{onPress:function(){t("/templates")},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(15),paddingTop:(0,x.vh)(40),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,x.vw)(25),paddingBottom:(0,x.vh)(13),borderBottomWidth:(0,x.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Templates"})}),(0,C.jsx)(m.ZP,{onPress:function(){t("/signatures")},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(15),paddingTop:(0,x.vh)(40),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,x.vw)(25),paddingBottom:(0,x.vh)(13),borderBottomWidth:(0,x.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Signatures"})})]})}),(0,C.jsx)(o.Z,{style:{marginTop:(0,x.vh)(20),width:(0,x.vw)(300)},alignItems:"center",justifyContent:"flex-end",space:2,children:(0,C.jsx)(H.default,{onPress:(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||0!==h.length){e.next=4;break}y(!0),e.next=13;break;case 4:return e.prev=4,e.next=7,p({type:w.bl,data:null});case 7:a(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),u("error",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])}))),label:"+ Create",style:{height:(0,x.vh)(36)}})})]}),(0,C.jsx)(c._,{from:"md",children:(0,C.jsxs)(o.Z,{alignSelf:"center",children:[(0,C.jsx)(m.ZP,{onPress:function(){t("/campaigns")},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(15),paddingTop:(0,x.vh)(20),paddingHorizontal:10,color:b.Z.primary,fontFamily:"Poppins_medium",marginHorizontal:(0,x.vw)(10),paddingBottom:(0,x.vh)(13),borderBottomWidth:(0,x.vh)(4),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Campaigns"})}),(0,C.jsx)(m.ZP,{onPress:function(){t("/templates")},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(15),paddingTop:(0,x.vh)(20),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,x.vw)(10),paddingBottom:(0,x.vh)(13),borderBottomWidth:(0,x.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Templates"})}),(0,C.jsx)(m.ZP,{onPress:function(){t("/signatures")},children:(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(15),paddingTop:(0,x.vh)(20),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,x.vw)(10),paddingBottom:(0,x.vh)(13),borderBottomWidth:(0,x.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Signatures"})})]})}),(0,C.jsx)(N.default,{size:"md",isOpen:g,header:"Attention!",close:function(){y(!1)},buttons:(0,C.jsxs)(o.Z,{space:2,children:[(0,C.jsx)(H.default,{space:2,onPress:function(){y(!1)},label:"Cancel",variant:"outline",color:b.Z.primary,style:{height:(0,x.vh)(36)}}),(0,C.jsx)(H.default,{space:2,onPress:function(){t("/templates")},label:"Add Template",style:{height:(0,x.vh)(36)}})]}),children:(0,C.jsx)(d.Z,{style:{fontFamily:"Poppins",fontSize:(0,x.vw)(15),color:"rgba(0,0,0,0.8)"},children:"You need a template to add a campaign"})})]})},M=function(e){var t=e.user,a=e.setLogout,o=(0,g.I0)(),c=(0,y.s0)(),m=(0,p.S)({base:"base",sm:"sm",lg:"lg",md:"md",xl:"xl"}),w=(0,u.pm)(),S=(0,i.useState)(50),z=(0,s.Z)(S,2),k=z[0],T=z[1],B=i.useState(!1),I=(0,s.Z)(B,2),O=I[0],F=I[1],L=(0,i.useState)("vertical"),A=(0,s.Z)(L,2),E=A[0],H=A[1],q=(0,i.useState)(!1),N=(0,s.Z)(q,2),M=N[0],V=N[1],K=(0,i.useState)(!1),Y=(0,s.Z)(K,2),G=Y[0],Q=Y[1],U=(0,i.useState)(!1),X=(0,s.Z)(U,1)[0],J=(0,i.useState)(1),$=(0,s.Z)(J,2),ee=$[0],te=$[1],ae=(0,g.v9)((function(e){return e.campaigns})),ne=ae.userCampaigns,re=ae.total,se=(0,g.v9)((function(e){return e.templates.userTemplates})),ie=(0,i.useCallback)((function(e,t){w.closeAll(),w.show({placement:"top",duration:1e3,render:function(){var a="red.300";return"error"===e?a="red.300":"success"===e?a="green.300":"info"===e?a="blueGray.300":"warning"===e&&(a="orange.300"),(0,C.jsx)(d.Z,{style:{fontSize:(0,x.vw)(12),fontFamily:"Poppins_medium",color:"#33214B"},p:2,bg:a,rounded:"full",children:t})}})}),[w]);(0,i.useEffect)((function(){(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(Z.pK(1,1e3));case 2:case"end":return e.stop()}}),e)})))()}),[o]);var le=(0,i.useCallback)((0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,e.next=4,o(j.DW(ee,k));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),ie("error",e.t0.message);case 9:Q(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),[o,ie,ee,k]);(0,i.useEffect)((function(){return V(!0),le().then((function(){V(!1)})),function(){V(!1),Q(!1)}}),[o,le,ee]);var oe=function(){return(0,C.jsx)(h.Z,{mt:250,flex:1,children:(0,C.jsx)(d.Z,{children:"No items found."})})},de=100-parseFloat((0,x.vh)(70))+"vh",ce=Math.floor(window.screen.width/250);return 0===ce&&(ce=1),(0,C.jsxs)(l.Z,{style:{minHeight:"100vh"},bg:"white",flex:1,children:[(0,C.jsx)(_.default,{user:t,setLogout:a}),(0,C.jsxs)(l.Z,{height:de,children:[(0,C.jsx)(W,{templates:se,navigate:c,setListStyle:H,listStyle:E,setIsOpen:F,dispatch:o,_showAlert:ie}),M?(0,C.jsx)(h.Z,{flex:1,children:(0,C.jsx)(f.Z,{size:"small",color:b.Z.primary})}):(0,C.jsxs)(C.Fragment,{children:[1===ce?(0,C.jsx)(v.O,{style:{marginLeft:"base"===m||"sm"===m?(0,x.vw)(-10):0},contentContainerStyle:{paddingBottom:20},ListEmptyComponent:(0,C.jsx)(oe,{}),refreshing:G,removeClippedSubviews:!0,data:ne,keyExtractor:function(e){return e._id},renderItem:function(e){var t=e.item;return(0,C.jsx)(P,{cols:ce,item:t,setIsOpen:F,setShowPreview:X})}},"list-"+ce):(0,C.jsx)(v.O,{style:{marginLeft:"base"===m||"sm"===m?(0,x.vw)(-10):0},contentContainerStyle:{paddingBottom:20},ListEmptyComponent:(0,C.jsx)(oe,{}),refreshing:G,removeClippedSubviews:!0,data:ne,keyExtractor:function(e){return e._id},renderItem:function(e){var t=e.item;return(0,C.jsx)(P,{cols:ce,item:t,setIsOpen:F,setShowPreview:X})},columnWrapperStyle:{justifyContent:ne.length>5?"space-between":"flex-start"},numColumns:5},"list-"+ce),re>k&&(0,C.jsx)(D.Z,{limit:k,total:re,page:ee,setPage:te,setIsLoading:V,setLimit:T})]}),O&&(0,C.jsx)(R,{isOpen:O,setIsOpen:F,templates:se})]})]})}}}]);
//# sourceMappingURL=1648.022ee6b1.chunk.js.map