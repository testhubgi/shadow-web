"use strict";(self.webpackChunkapp_web_react=self.webpackChunkapp_web_react||[]).push([[3010],{27074:function(e,t,n){n.d(t,{Z:function(){return x}});var r,a=n(1413),i=n(30168),s=n(72791),o=n(26686),l=n(18227),c=n(68500),d=n(96048),u=n.n(d),h=n(16444),m=n(70084),p=n(80184),g=(n(65785),n(70793)),f=function(e){var t=e.total,n=void 0===t?1:t,s=e.limit,d=void 0===s?10:s,f=e.setLimit,x=e.setPage,y=e.page,v=(e.setIsLoading,e.style),j=e.view,b=void 0===j||j,w=Math.ceil(n/d),Z=(0,h.ZP)(u()).attrs({activeClassName:"active"})(r||(r=(0,i.Z)(['\n    margin-bottom: 1rem;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    list-style-type: none;\n    padding: 0 1rem;\n    li a {\n      border-radius: 4px;\n      padding: 0.1rem 1rem;\n      cursor: pointer;\n      color: rgba(102, 102, 102, 1);\n      font-family: "Poppins_medium";\n      font-size: ',';\n    }\n    li.previous a,\n    li.next a,\n    li.break a {\n      border-color: transparent;\n      color: rgba(102, 102, 102, 1);\n      font-family: "Poppins_medium";\n      font-size: ',';\n    }\n    li.active a {\n      background-color: #7d2be9;\n      border-color: transparent;\n      color: white;\n      min-width: 24px;\n      font-family: "Poppins_medium";\n      font-size: ',";\n    }\n    li.disabled a {\n      color: rgba(102, 102, 102, 0.5);\n    }\n    li.disable,\n    li.disabled a {\n      cursor: default;\n    }\n  "])),(0,m.vw)(15),(0,m.vw)(15),(0,m.vw)(15));return(0,p.jsxs)(o.Z,{style:(0,a.Z)({boxShadow:"0px 0px 15px rgba(0, 0, 0, 0.1)",justifyContent:"space-between",alignItems:"center",height:(0,m.vh)(60),backgroundColor:"white"},v),children:[b?(0,p.jsxs)(o.Z,{style:{alignItems:"center",paddingHorizontal:(0,m.vh)(20)},children:[(0,p.jsx)(l.Z,{style:{fontFamily:"Poppins_medium",fontSize:(0,m.vw)(15),color:"rgba(102, 102, 102, 1)",marginRight:(0,m.vw)(10)},children:"View"}),(0,p.jsxs)(c.Z,{outlineColor:"rgba(0,0,0.0.15)",outlineStyle:{borderWidth:(0,m.vh)(2)},variant:"outline",selectedValue:parseInt(d),style:{width:(0,m.vw)(50)},onValueChange:function(e){x(1),f(e)},dropdownIcon:(0,p.jsx)(g.Z,{}),children:[(0,p.jsx)(c.Z.Item,{label:"1",value:1}),(0,p.jsx)(c.Z.Item,{label:"5",value:5}),(0,p.jsx)(c.Z.Item,{label:"10",value:10}),(0,p.jsx)(c.Z.Item,{label:"20",value:20}),(0,p.jsx)(c.Z.Item,{label:"30",value:30}),(0,p.jsx)(c.Z.Item,{label:"40",value:40}),(0,p.jsx)(c.Z.Item,{label:"50",value:50}),(0,p.jsx)(c.Z.Item,{label:"100",value:100})]}),(0,p.jsx)(l.Z,{style:{fontFamily:"Poppins_medium",fontSize:(0,m.vw)(15),color:"rgba(102, 102, 102, 1)",marginLeft:(0,m.vw)(10)},children:"per page"})]}):(0,p.jsx)(o.Z,{}),(0,p.jsx)(Z,{breakLabel:"...",nextLabel:"Next >",onPageChange:function(e){x(e.selected+1)},pageRangeDisplayed:3,marginPagesDisplayed:2,pageCount:w,previousLabel:"< Previous",renderOnZeroPageCount:null,forcePage:y-1})]})},x=s.memo(f)},40542:function(e,t,n){var r=n(1413),a=(n(72791),n(83814)),i=n.n(a),s=n(80184);t.Z=function(e){return(0,s.jsx)(i(),(0,r.Z)((0,r.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:24,height:24},e),{},{children:(0,s.jsxs)(a.G,{fill:"none",children:[(0,s.jsx)(a.Path,{"data-name":"Rectangle 287",d:"M0 0h24v24H0z"}),(0,s.jsxs)(a.G,{opacity:.5,stroke:e.fill||"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[(0,s.jsx)(a.Path,{"data-name":"Stroke 1",d:"m16.964 9.392-3.762 3.059a1.945 1.945 0 0 1-2.421 0L6.987 9.392"}),(0,s.jsx)(a.Path,{"data-name":"Stroke 3",d:"M16.122 19.677c2.575.007 4.31-2.108 4.31-4.708V9.154a4.407 4.407 0 0 0-4.31-4.716H7.81A4.407 4.407 0 0 0 3.5 9.154v5.814c0 2.6 1.735 4.716 4.31 4.708Z"})]})]})}))}},5657:function(e,t,n){n.r(t),n.d(t,{default:function(){return he}});var r=n(74165),a=n(15861),i=n(70885),s=n(72791),o=n(74222),l=n(26686),c=n(18227),d=n(95417),u=n(60961),h=n(25492),m=n(55045),p=n(68129),g=n(29996),f=n(59434),x=n(16871),y=n(70084),v=n(65785),j=n(50344),b=n(69261),w=n(75247),Z=n(1413),_=n(83814),S=n.n(_),P=n(80184),C=y.ZP.vw,z=y.ZP.vh,R=function(e){return(0,P.jsx)(S(),(0,Z.Z)((0,Z.Z)({viewBox:"0 0 94 94",width:e.width||C(94),height:e.height||z(94)},e),{},{children:(0,P.jsxs)(_.G,{id:"Group_1225","data-name":"Group 1225",transform:"translate(-8942 543)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1573","data-name":"Rectangle 1573",width:"94",height:"94",transform:"translate(8942 -543)",fill:"#e4e4e4"}),(0,P.jsxs)(_.G,{id:"Group_1224","data-name":"Group 1224",transform:"translate(0 -1)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1577","data-name":"Rectangle 1577",width:"28",height:"22",rx:"3",transform:"translate(8950 -481)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1579","data-name":"Rectangle 1579",width:"31",height:"4",rx:"2",transform:"translate(8997 -475)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1580","data-name":"Rectangle 1580",width:"31",height:"4",rx:"2",transform:"translate(8997 -468)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1581","data-name":"Rectangle 1581",width:"78",height:"40",rx:"3",transform:"translate(8950 -530)",fill:"#ccc"})]})]})}))},k=y.ZP.vw,I=y.ZP.vh,T=function(e){return(0,P.jsx)(S(),(0,Z.Z)((0,Z.Z)({viewBox:"0 0 94 94",width:e.width||k(94),height:e.height||I(94)},e),{},{children:(0,P.jsxs)(_.G,{id:"Group_1226","data-name":"Group 1226",transform:"translate(-8942 543)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1573","data-name":"Rectangle 1573",width:"94",height:"94",transform:"translate(8942 -543)",fill:"#e4e4e4"}),(0,P.jsxs)(_.G,{id:"Group_1224","data-name":"Group 1224",transform:"translate(8950 -531)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1577","data-name":"Rectangle 1577",width:"28",height:"22",rx:"3",transform:"translate(50 49)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1579","data-name":"Rectangle 1579",width:"31",height:"4",rx:"2",transform:"translate(0 55)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1580","data-name":"Rectangle 1580",width:"31",height:"4",rx:"2",transform:"translate(0 62)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1581","data-name":"Rectangle 1581",width:"78",height:"40",rx:"3",fill:"#ccc"})]})]})}))},B=y.ZP.vw,F=y.ZP.vh,L=function(e){return(0,P.jsx)(S(),(0,Z.Z)((0,Z.Z)({viewBox:"0 0 94 94",width:e.width||B(94),height:e.height||F(94)},e),{},{children:(0,P.jsxs)(_.G,{id:"Group_1227","data-name":"Group 1227",transform:"translate(-8942 543)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1573","data-name":"Rectangle 1573",width:"94",height:"94",transform:"translate(8942 -543)",fill:"#e4e4e4"}),(0,P.jsxs)(_.G,{id:"Group_1224","data-name":"Group 1224",transform:"translate(8950 -531)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1577","data-name":"Rectangle 1577",width:"28",height:"22",rx:"3",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1579","data-name":"Rectangle 1579",width:"31",height:"4",rx:"2",transform:"translate(47 12)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1580","data-name":"Rectangle 1580",width:"31",height:"4",rx:"2",transform:"translate(47 5)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1581","data-name":"Rectangle 1581",width:"78",height:"40",rx:"3",transform:"translate(0 31)",fill:"#ccc"})]})]})}))},H=y.ZP.vw,O=y.ZP.vh,E=function(e){return(0,P.jsxs)(S(),(0,Z.Z)((0,Z.Z)({viewBox:"0 0 94 94",width:e.width||H(94),height:e.height||O(94)},e),{},{children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1573","data-name":"Rectangle 1573",width:"94",height:"94",fill:"#e4e4e4"}),(0,P.jsxs)(_.G,{id:"Group_1224","data-name":"Group 1224",transform:"translate(8 12)",children:[(0,P.jsx)(_.Rect,{id:"Rectangle_1577","data-name":"Rectangle 1577",width:"28",height:"22",rx:"3",transform:"translate(50)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1579","data-name":"Rectangle 1579",width:"31",height:"4",rx:"2",transform:"translate(0 12)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1580","data-name":"Rectangle 1580",width:"31",height:"4",rx:"2",transform:"translate(0 5)",fill:"#ccc"}),(0,P.jsx)(_.Rect,{id:"Rectangle_1581","data-name":"Rectangle 1581",width:"78",height:"40",rx:"3",transform:"translate(0 31)",fill:"#ccc"})]})]}))},G=n(40542),W=function(e){e.isEnd;var t=e.item,n=e.setIsOpen,i=e.setShowPreview,s=e.setTemplateOptions,d=e.cols,h=(0,f.I0)();return(0,P.jsx)(u.ZP,{onPress:(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({type:w.iZ,data:t});case 2:n(!0);case 3:case"end":return e.stop()}}),e)}))),children:(0,P.jsxs)(o.Z,{style:{boxShadow:"0px 3px 10px #0000001A",width:1===d?"88%":(0,y.vw)(250),height:(0,y.vh)(280),marginHorizontal:(0,y.vw)(20),marginVertical:(0,y.vh)(20),borderRadius:(0,y.vw)(10),flex:1},children:[(0,P.jsxs)(m.Z,{style:{backgroundColor:"#F2F4F8",height:(0,y.vh)(200),borderRadius:(0,y.vw)(10),width:1===d?"100%":(0,y.vw)(250)},children:[1===t.style_id&&(0,P.jsx)(R,{width:(0,y.vw)(230),height:(0,y.vh)(180)}),2===t.style_id&&(0,P.jsx)(T,{}),3===t.style_id&&(0,P.jsx)(L,{}),4===t.style_id&&(0,P.jsx)(E,{}),"email"===t.templatetype&&(0,P.jsx)(G.Z,{width:(0,y.vw)(100),height:(0,y.vw)(100),fill:"rgba(0,0,0,0.15)"})]}),(0,P.jsx)(c.Z,{style:{marginTop:10,color:v.Z.primary,fontFamily:"Poppins_medium",fontSize:(0,y.vw)(15),textAlign:"left",marginLeft:(0,y.vw)(20)},children:t.name}),(0,P.jsxs)(l.Z,{style:{marginTop:(0,y.vh)(6),marginHorizontal:(0,y.vw)(20),marginBottom:(0,y.vh)(10)},justifyContent:"space-between",children:[(0,P.jsx)(c.Z,{style:{color:"#686868",fontFamily:"Poppins",fontSize:(0,y.vw)(13)},children:"email"===t.templatetype?"Email":"Mail"}),(0,P.jsx)(u.ZP,{onPress:function(){s(t),i(!0)},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(13),fontFamily:"Poppins",color:v.Z.primary},children:"Preview"})})]})]})})},A=n(4200),N=n(56798),q=n(42982),M=n(11638),V=n(69912),D=n(42131),J=n(29699),X=n(61134),Y=n(763),K=n.n(Y),Q=n(34257),U=n(79015),$=n(44843),ee=n(93142),te=n(23093),ne=n(29139),re=["Roboto","Quicksand","Lobster","Satisfy","Caveat","Courgette"],ae=function(e){var t=e.isOpen,n=e.setIsOpen,d=e.setRefresh,g=(0,f.I0)(),x=(0,s.useRef)(),j=(0,A.PR)(),Z=(0,h.pm)(),_=(0,s.useState)(!1),S=(0,i.Z)(_,2),C=S[0],z=S[1],k=(0,f.v9)((function(e){return e.templates.currentTemplate})),I=(0,M.S)({base:"base",sm:"sm",lg:"lg",md:"md",xl:"xl"}),B=(0,f.v9)((function(e){return e.signatures.userSignatures})),F=(0,s.useState)(!1),H=(0,i.Z)(F,2),O=H[0],G=H[1],W=(0,s.useState)(!1),N=(0,i.Z)(W,2),Y=N[0],ae=N[1],ie=(0,s.useState)(!1),se=(0,i.Z)(ie,2),oe=se[0],le=(se[1],(0,s.useState)(!1)),ce=(0,i.Z)(le,2),de=ce[0],ue=ce[1],he=(0,s.useState)(v.Z.primary),me=(0,i.Z)(he,2),pe=me[0],ge=me[1],fe=(0,s.useState)("p"),xe=(0,i.Z)(fe,2),ye=xe[0],ve=xe[1],je=(0,s.useState)(1),be=(0,i.Z)(je,2),we=be[0],Ze=be[1],_e=function(){return n(!1)},Se=s.useState(!1),Pe=(0,i.Z)(Se,2),Ce=(Pe[0],Pe[1],s.useState(!1)),ze=(0,i.Z)(Ce,2),Re=ze[0],ke=ze[1],Ie=function(){return ke(!1)},Te=(s.useRef(null),(0,s.useState)({header:"",desc:"",nolabel:"No",yeslabel:"Yes",yes:function(){},no:Ie})),Be=(0,i.Z)(Te,2),Fe=Be[0],Le=Be[1],He=(0,s.useState)(k&&k.section_a?k.section_a.length:0),Oe=(0,i.Z)(He,2),Ee=Oe[0],Ge=Oe[1],We=(0,s.useState)(k&&k.section_b?k.section_b.length:0),Ae=(0,i.Z)(We,2),Ne=Ae[0],qe=Ae[1],Me=(0,s.useState)(k&&k.section_a?k.section_c.length:0),Ve=(0,i.Z)(Me,2),De=Ve[0],Je=Ve[1],Xe=(0,q.Z)(B).map((function(e){return{label:e.label,value:e._id}})),Ye=re.map((function(e){return{label:e,value:e}})),Ke=["postcard","email"].map((function(e){return{label:"postcard"===e?"Mail":"email"===e?"E-mail":"",value:e}})),Qe=(0,X.cI)({mode:"onChange",defaultValues:K().isEmpty(k)?{name:"",templatetype:"postcard",emailcontent:"",subject:"",section_a:"",section_b:"",section_c:"",primarycolor:"#ffffff",secondarycolor:"#000000",fontfamily:"Roboto",signature:"",includeinbody:!1}:{name:k.name,templatetype:k.templatetype?k.templatetype:"postcard",emailcontent:k.emailcontent?k.emailcontent:"",subject:k.subject?k.subject:"",section_a:k.section_a?k.section_a:"",section_b:k.section_b?k.section_b:"",section_c:k.section_c?k.section_c:"",primarycolor:k.primarycolor?k.primarycolor:"#ffffff",secondarycolor:k.secondarycolor?k.secondarycolor:"#000000",fontfamily:k.fontfamily?k.fontfamily:"Roboto",signature:k.signature?k.signature._id:"",includeinbody:!!k.includeinbody&&k.includeinbody}}),Ue=Qe.control,$e=Qe.handleSubmit,et=Qe.formState.errors,tt=Qe.getValues,nt=Qe.setValue,rt=Qe.trigger;(0,s.useEffect)((function(){Y&&$e(it,(function(){ae(!1)}))()}),[Y]);var at=(0,s.useCallback)((function(e,t){Z.show({placement:"top",render:function(){var n="red.300";return"error"===e?n="red.300":"success"===e?n="green.300":"info"===e?n="blueGray.300":"warning"===e&&(n="orange.300"),(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(12),fontFamily:"Poppins_medium",color:"#33214B"},p:2,bg:n,rounded:"full",children:t})}})}),[Z]),it=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var a,i,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={name:t.name,templatetype:t.templatetype,subject:t.subject,emailcontent:t.emailcontent,signature:t.signature,includeinbody:t.includeinbody},!(i=B.find((function(e){return e._id===t.signature})))||i.smtp||"email"!==t.templatetype){e.next=6;break}return at("error","Cannot save template. Selected signature does not have an SMTP configured and cannot be used to send emails."),ae(!1),e.abrupt("return");case 6:return"postcard"===t.templatetype&&(a={name:t.name,templatetype:t.templatetype,style_id:we,section_a:t.section_a,section_b:t.section_b,section_c:t.section_c,section_d:"",primarycolor:t.primarycolor,secondarycolor:t.secondarycolor,fontfamily:""===t.fontfamily?re[0]:t.fontfamily,signature:t.signature}),k&&k._id&&(a._id=k._id),s=b.Xu(a),o=a._id?"Template updated successfully.":"Template created successfully.",e.prev=10,e.next=13,g(s);case 13:at("success",o),ke(!1),n(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),at("error",e.t0.message),ae(!1);case 22:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k._id){e.next=14;break}return G(!0),e.prev=2,t=b.Xc(k._id),e.next=6,g(t);case 6:e.sent&&(at("success","Template deleted successfully."),ke(!1),n(!1),d((function(e){return!e}))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),at("error",e.t0.message),G(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return O?(0,P.jsx)(m.Z,{bg:"white",flex:1,children:(0,P.jsx)(p.Z,{size:"small",color:v.Z.primary})}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(o.Z,{bg:"white",mb:20,children:(0,P.jsx)($.default,{size:"xl",header:k&&k._id?"Edit Template":"Create Template",isOpen:t,close:function(){_e()},isLoading:Y,save:function(){0===Object.keys(et).length&&ae(!0)},buttons:(0,P.jsxs)(l.Z,{space:2,children:[k&&k._id&&(0,P.jsx)(ee.default,{space:2,variant:"outline",label:"Delete",style:{height:(0,y.vh)(36),background:"rgba(255, 0, 0, 0.4)"},onPress:function(){if(k&&k.campaigns&&k.campaigns.length>0)return Le({header:"Sorry!",desc:"Cannot delete template, found associated campaigns",nolabel:"Okay",yeslabel:"",yes:function(){},no:Ie}),void ke(!0);Le({header:"Delete!",desc:"Are you sure you want to delete this template?",nolabel:"No",yeslabel:"Yes",yes:st,no:Ie}),ke(!0)}}),(0,P.jsx)(ee.default,{space:2,color:"#7D2BE9",variant:"outline",style:{height:(0,y.vh)(36)},label:"Cancel",onPress:function(){_e()}}),(0,P.jsx)(ee.default,{space:3,label:"Save",isLoading:Y,style:{height:(0,y.vh)(36)},onPress:function(){0===Object.keys(et).length&&ae(!0)}})]}),children:(0,P.jsxs)(o.Z,{style:{zoom:"90%"},children:[(0,P.jsx)(l.Z,{space:4,style:{width:"base"===I||"sm"===I?"94vw":(0,y.vw)(612),justifyContent:"space-between",marginBottom:(0,y.vh)(20)},children:(0,P.jsx)(U.Z,{control:Ue,isRequired:!0,name:"name",label:"Template Name ",placeholder:"Enter template name",invalid:!!et.name,error:et.name?et.name.message:"",rules:{required:{value:!0,message:"Please enter template name."}}})}),(0,P.jsxs)(l.Z,{space:3,style:{width:"base"===I||"sm"===I?"45.5vw":(0,y.vw)(300),justifyContent:"space-between",marginVertical:(0,y.vh)(20),zIndex:9999},children:[(0,P.jsx)(te.Z,{control:Ue,items:Ke,name:"templatetype",label:"Select template type ",placeholder:"Select type",onChange:function(e){console.log(e),rt("templatetype")},invalid:!!et.templatetype,error:et.templatetype?et.templatetype.message:"",rules:{required:{value:!0,message:"Please select a template type."}}}),(0,P.jsx)(te.Z,{ref:x,control:Ue,items:Xe,name:"signature",label:"Select signature ",placeholder:"Select a signature",onChange:function(e){console.log("onChange fired",e);var t=B.find((function(t){return t._id===e}));if(console.log(t&&!t.smtp,tt("templatetype")),t&&!t.smtp&&"email"===tt("templatetype"))return console.log("No Smtp found"),Le({header:"Attention!",desc:"Selected signature does not have an SMTP configured and cannot be used to send emails",nolabel:"Not Now",yeslabel:"Configure Now",yes:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.createdby===j._id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g({type:w.LD,data:t});case 4:z(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),no:function(){nt("signature",""),rt("signature"),Ie()}}),void ke(!0);nt("signature",e),rt("signature")},invalid:!!et.signature,error:et.signature?et.signature.message:"",rules:{required:{value:!0,message:"Please select signature."}}})]}),"postcard"===tt("templatetype")?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(l.Z,{space:4,style:{width:(0,y.vw)(612),justifyContent:"space-between",marginVertical:(0,y.vh)(20),zIndex:9999},children:(0,P.jsxs)(V.NI,{children:[(0,P.jsxs)(V.NI.Label,{children:["Select template style"," "]}),(0,P.jsx)(D.p,{horizontal:!0,width:"94vw",children:[1,2,3,4].map((function(e,t){return(0,P.jsx)(u.ZP,{onPress:function(){Ze(e)},style:{marginRight:(0,y.vw)(20)},children:(0,P.jsxs)(m.Z,{children:[1===e&&(0,P.jsx)(R,{}),2===e&&(0,P.jsx)(T,{}),3===e&&(0,P.jsx)(L,{}),4===e&&(0,P.jsx)(E,{}),(0,P.jsxs)(c.Z,{color:we===e?v.Z.primary:"black",style:{fontFamily:"Poppins",fontSize:(0,y.vw)(13),marginTop:(0,y.vh)(10)},children:["Style ",e]})]})},"t-"+t)}))})]})}),(0,P.jsx)(l.Z,{space:4,style:{width:"base"===I||"sm"===I?"94vw":(0,y.vw)(612),justifyContent:"space-between",marginBottom:(0,y.vh)(20),zIndex:9999},children:(0,P.jsx)(U.Z,{control:Ue,name:"section_a",id:"section_a",label:"Frontside heading (".concat(Ee,"/34) "),placeholder:"Enter frontside heading",setCharCount:Ge,minLength:1,maxLength:34,invalid:!!et.section_a,error:et.section_a?et.section_a.message:"",rules:{required:{value:"postcard"===tt("templatetype"),message:"Please enter details."}}})}),(0,P.jsxs)(o.Z,{style:{width:"base"===I||"sm"===I?"94vw":(0,y.vw)(612),marginTop:(0,y.vh)(20),marginBottom:(0,y.vh)(50),zIndex:9999},children:[""!==tt("section_b")&&(0,P.jsx)(u.ZP,{onPress:function(){qe(0),nt("section_b",""),rt("section_b")},_text:{color:"#4C7AD6"},style:{position:"absolute",right:0,top:(0,y.vh)(5)},bg:"transparent",children:(0,P.jsx)(c.Z,{children:"Clear"})}),(0,P.jsx)(U.Z,{control:Ue,multiline:!0,numberOfLines:2,name:"section_b",id:"section_b",label:"Frontside text (".concat(Ne,"/169) "),placeholder:"Enter frontside text",setCharCount:qe,minLength:1,maxLength:169,height:(0,y.vh)(80),invalid:!!et.section_b,error:et.section_b?et.section_b.message:"",rules:{required:{value:"postcard"===tt("templatetype"),message:"Please enter details."}}})]}),(0,P.jsxs)(o.Z,{style:{width:"base"===I||"sm"===I?"94vw":(0,y.vw)(612),marginVertical:(0,y.vh)(30),zIndex:9999},children:[""!==tt("section_c")&&(0,P.jsx)(u.ZP,{onPress:function(){Je(0),nt("section_c",""),rt("section_c")},_text:{color:"#4C7AD6"},style:{position:"absolute",right:0,top:(0,y.vh)(5)},bg:"transparent",children:(0,P.jsx)(c.Z,{children:"Clear"})}),(0,P.jsx)(U.Z,{control:Ue,multiline:!0,numberOfLines:2,name:"section_c",id:"section_c",label:"Backside text (".concat(De,"/88) "),placeholder:"Enter backside text",minLength:1,maxLength:88,height:(0,y.vh)(70),setCharCount:Je,invalid:!!et.section_c,error:et.section_c?et.section_c.message:"",rules:{required:{value:"postcard"===tt("templatetype"),message:"Please enter details."}}})]}),(0,P.jsxs)(l.Z,{space:4,style:{width:"base"===I||"sm"===I?"94vw":(0,y.vw)(612),justifyContent:"space-between",marginVertical:(0,y.vh)(40),zIndex:9999},children:[(0,P.jsxs)(o.Z,{style:{width:"base"===I||"sm"===I?"45vw":(0,y.vw)(300),zIndex:1},children:[(0,P.jsx)(m.Z,{style:{position:"absolute",right:0,top:(0,y.vh)(5),zIndex:2},children:(0,P.jsx)(u.ZP,{onPress:function(){ue(!de),ve("p")},children:(0,P.jsx)(c.Z,{children:"Pick"})})}),(0,P.jsx)(U.Z,{control:Ue,isRequired:!0,name:"primarycolor",id:"primarycolor",label:"Background Color ",placeholder:"#000000",maxLength:7,invalid:!!et.primarycolor,error:et.primarycolor?et.primarycolor.message:"",rightIcon:(0,P.jsx)(m.Z,{marginRight:(0,y.vw)(10),children:(0,P.jsx)(J.J,{size:22,color:tt("primarycolor")})}),rules:{required:{value:!0,message:"Please enter or pick background color."}}})]}),(0,P.jsxs)(o.Z,{style:{width:"base"===I||"sm"===I?"45vw":(0,y.vw)(300),zIndex:1},children:[(0,P.jsx)(m.Z,{style:{position:"absolute",right:0,top:(0,y.vh)(5),zIndex:2},children:(0,P.jsx)(u.ZP,{onPress:function(){ve("f"),ue(!de)},children:(0,P.jsx)(c.Z,{children:"Pick"})})}),(0,P.jsx)(U.Z,{control:Ue,isRequired:!0,name:"secondarycolor",id:"secondarycolor",label:"Font Color ",placeholder:"#000000",maxLength:7,invalid:!!et.secondarycolor,rightIcon:(0,P.jsx)(m.Z,{marginRight:(0,y.vw)(10),children:(0,P.jsx)(J.J,{size:22,color:tt("secondarycolor")})}),error:et.secondarycolor?et.secondarycolor.message:"",rules:{required:{value:!0,message:"Please enter or pick font color."}}})]})]}),(0,P.jsx)(l.Z,{space:4,style:{width:"base"===I||"sm"===I?"94vw":(0,y.vw)(300),justifyContent:"space-between",marginBottom:(0,y.vh)(20)},children:(0,P.jsx)(te.Z,{control:Ue,items:Ye,name:"fontfamily",id:"fontfamily",label:"Select a font ",placeholder:"Select a font",invalid:!!et.fontfamily,error:et.fontfamily?et.fontfamily.message:"",rules:{required:{value:"postcard"===tt("templatetype"),message:"Please select fontfamily."}}})})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(l.Z,{space:4,style:{justifyContent:"space-between",marginBottom:(0,y.vh)(20),zIndex:9999},children:(0,P.jsx)(U.Z,{control:Ue,name:"subject",id:"subject",label:"Subject ",placeholder:"Enter email subject",invalid:!!et.subject,error:et.subject?et.subject_a.message:"",rules:{required:{value:!0,message:"Please enter email subject."}}})}),(0,P.jsxs)(o.Z,{style:{marginTop:(0,y.vh)(20),marginBottom:(0,y.vh)(30),zIndex:9999},children:[""!==tt("emailcontent")&&(0,P.jsx)(u.ZP,{onPress:function(){nt("emailcontent",""),rt("emailcontent")},_text:{color:"#4C7AD6"},style:{position:"absolute",right:0,top:(0,y.vh)(5),zIndex:3},bg:"transparent",children:(0,P.jsx)(c.Z,{children:"Clear"})}),(0,P.jsx)(U.Z,{control:Ue,multiline:!0,numberOfLines:6,name:"emailcontent",id:"emailcontent",label:"Email Body ",placeholder:"Enter email body",height:(0,y.vh)(300),invalid:!!et.emailcontent,error:et.emailcontent?et.emailcontent.message:"",rules:{required:{value:"email"===tt("templatetype"),message:"Please enter email body"}}})]})]})]})})}),de&&(0,P.jsx)($.default,{size:"sm",header:"Pick Color",isOpen:de,cancel:function(){ue(!1)},buttons:(0,P.jsx)(ee.default,{space:2,variant:"outline",label:"Close",onPress:function(){ue(!1)},style:{height:(0,y.vh)(36)}}),children:(0,P.jsx)(m.Z,{children:(0,P.jsx)(Q.xS,{color:pe,onChangeComplete:function(e){"p"===ye?(nt("primarycolor",e.hex),rt("primarycolor")):(nt("secondarycolor",e.hex),rt("secondarycolor"))},onChange:function(e){ge(e)}})})}),(0,P.jsx)($.default,{size:"md",isOpen:Re,close:function(){ke(!1)},header:Fe.header,buttons:(0,P.jsx)(l.Z,{space:2,children:""===Fe.yeslabel?(0,P.jsx)(ee.default,{space:4,onPress:function(){ke(!1)},color:"rgba(0,0,0, 0.5)",variant:"outline",label:"Okay",style:{height:(0,y.vh)(32)}}):(0,P.jsxs)(l.Z,{space:2,children:[(0,P.jsx)(ee.default,{space:4,onPress:function(){ke(!1)},color:"rgba(0,0,0, 0.5)",variant:"outline",label:Fe.nolabel,style:{height:(0,y.vh)(32)}}),(0,P.jsx)(ee.default,{space:4,isLoading:oe,onPress:Fe.yes,color:"white",label:Fe.yeslabel,style:{height:(0,y.vh)(32)}})]})}),children:(0,P.jsx)(c.Z,{style:{fontFamily:"Poppins_medium",fontSize:(0,y.vw)(15),color:"rgba(0,0,0,0.8)"},children:Fe.desc})}),C&&(0,P.jsx)(ne.default,{isOpen:C,setIsOpen:z,_showAlert:at})]})},ie=n(27074),se=n(78312),oe=n(20520),le=n(22019),ce=function(e){var t=e.html;return(0,P.jsx)("div",{children:(0,P.jsx)("div",{dangerouslySetInnerHTML:{__html:t}})})},de=function(e){var t=e.templateOption,n=(0,s.useState)("f"),r=(0,i.Z)(n,2),a=r[0],d=r[1];if(!t.signature)return null;var u=t.signature.name,h=t.signature.email,p=t.signature.phone,g=t.signature.company_logo,f=t.signature.image,x=t.style_id&&t.style_id,v=t.section_a&&t.section_a,j=t.section_b&&t.section_b,b=t.section_c&&t.section_c,w=t.signature.disclosure,Z=t.fontfamily,_=t.secondarycolor,S=t.primarycolor,C="".concat(A.G3,"/preview/property.jpg"),z="".concat(A.G3,"/signatures/").concat(g),R="".concat(A.G3,"/signatures/").concat(f);return"email"===t.templatetype?(0,P.jsx)(ce,{html:t.emailcontent}):(0,P.jsxs)(o.Z,{style:{width:"100%",marginVertical:(0,y.vw)(20),backgroundColor:"white"},children:[(0,P.jsx)(se.Z,{flex:1,style:{justifyContent:"flex-end"},children:(0,P.jsx)(oe.z,{onPress:function(){d((function(e){return"f"===e?"b":"f"}))},variant:"unstyled",my:1,style:{position:"absolute",right:0},children:"f"===a?"Back Side":"Front Side"})}),"f"===a?(0,P.jsxs)(o.Z,{style:{width:"100%",height:200,borderWidth:0,borderColor:"#ccc"},children:[3===x&&(0,P.jsxs)(l.Z,{style:{justifyContent:"space-between",height:60},children:["0"!==g&&(0,P.jsx)(m.Z,{style:{width:80,backgroundColor:S},children:(0,P.jsx)(le.Z,{resizeMethod:"resize",style:{width:80,height:60,margin:10,position:"absolute"},source:{uri:z}})}),(0,P.jsxs)(o.Z,{style:{backgroundColor:S,paddingHorizontal:5,width:"0"!==g?"79%":"100%"},children:[(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:13},children:v}),(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:10,padding:2,lineHeight:11,flex:1,flexWrap:"wrap"},children:j})]})]}),4===x&&(0,P.jsxs)(l.Z,{style:{justifyContent:"space-between",height:60},children:[(0,P.jsxs)(o.Z,{style:{backgroundColor:S,paddingHorizontal:5,width:"0"!==g?"79%":"100%"},children:[(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:13},children:v}),(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:10,padding:2,lineHeight:11,flex:1,flexWrap:"wrap"},children:j})]}),"0"!==g&&(0,P.jsx)(m.Z,{style:{width:80,backgroundColor:S},children:(0,P.jsx)(le.Z,{resizeMethod:"resize",style:{width:80,height:60,margin:10,position:"absolute"},source:{uri:z}})})]}),(0,P.jsx)(m.Z,{style:{height:140},children:(0,P.jsx)(le.Z,{style:{width:"100%",height:"100%",position:"absolute"},source:{uri:C}})}),1===x&&(0,P.jsxs)(l.Z,{style:{justifyContent:"space-between",height:60},children:["0"!==g&&(0,P.jsx)(m.Z,{style:{width:80,backgroundColor:S,borderWidth:0},children:(0,P.jsx)(le.Z,{resizeMethod:"resize",style:{width:80,height:60,margin:10,position:"absolute"},source:{uri:z}})}),(0,P.jsxs)(o.Z,{style:{backgroundColor:S,paddingHorizontal:5,width:"0"!==g?"79%":"100%"},children:[(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:13},children:v}),(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:10,padding:2,lineHeight:11,flex:1,flexWrap:"wrap"},children:j})]})]}),2===x&&(0,P.jsxs)(l.Z,{style:{justifyContent:"space-between",height:60},children:[(0,P.jsxs)(o.Z,{style:{backgroundColor:S,paddingHorizontal:5,width:"0"!==g?"79%":"100%"},children:[(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:13},children:v}),(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:10,padding:2,lineHeight:11,flex:1,flexWrap:"wrap"},children:j})]}),"0"!==g&&(0,P.jsx)(m.Z,{style:{width:80,backgroundColor:S},children:(0,P.jsx)(le.Z,{resizeMethod:"resize",style:{width:80,height:60,margin:10,position:"absolute"},source:{uri:z}})})]})]}):(0,P.jsxs)(l.Z,{space:2,style:{bottom:0,justifyContent:"space-between",height:200,borderColor:"#ccc",borderWidth:1},children:[(0,P.jsxs)(o.Z,{style:{height:"100%",backgroundColor:S,width:"35%",padding:2},children:["0"!==f&&(0,P.jsx)(m.Z,{style:{width:"100%",backgroundColor:S},children:(0,P.jsx)(le.Z,{style:{width:"100%",height:100},source:{uri:R}})}),(0,P.jsx)(se.Z,{style:{borderWidth:1,borderColor:"#ccc",backgroundColor:"white",height:40,margin:5,borderRadius:5,flexDirection:"row"},children:(0,P.jsx)(c.Z,{style:{lineHeight:10,fontFamily:Z,color:"black",fontSize:8,flexWrap:"wrap",textAlign:"center",flex:1},children:b})}),(0,P.jsxs)(o.Z,{style:{marginTop:5},space:1,children:[(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:9,marginHorizontal:10,lineHeight:10},children:u}),(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:8,marginHorizontal:10,lineHeight:8},children:(0,y.un)(p)}),(0,P.jsx)(c.Z,{style:{fontFamily:Z,color:_,fontSize:8,marginHorizontal:10,lineHeight:8},children:h})]})]}),(0,P.jsx)(o.Z,{style:{height:"100%",width:"65%"},children:(0,P.jsxs)(l.Z,{style:{justifyContent:"space-between"},children:[(0,P.jsx)(c.Z,{style:{lineHeight:10,fontFamily:Z,color:"black",fontSize:8,flexWrap:"wrap",textAlign:"center",width:"50%",marginTop:20},children:"MLS: "+w}),"0"!==g&&(0,P.jsx)(se.Z,{style:{position:"absolute",width:80,top:10,right:20},children:(0,P.jsx)(le.Z,{style:{width:"100%",height:64},source:{uri:z}})})]})})]})]})},ue=function(e){e.listStyle,e.setListStyle;var t=e.navigate,n=e.setIsOpen,h=e.dispatch,m=e._showAlert,p=e.signatures,g=(0,s.useState)(!1),f=(0,i.Z)(g,2),x=f[0],j=f[1];return(0,P.jsxs)(o.Z,{style:{marginTop:(0,y.vh)(-10),marginHorizontal:(0,y.vw)(20),borderBottomColor:"rgba(0,0,0,0.15)",borderBottomWidth:1},children:[(0,P.jsxs)(l.Z,{justifyContent:"space-between",children:[(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(24),paddingTop:(0,y.vh)(30),width:(0,y.vw)(300),color:"#303030",fontFamily:"Poppins_medium"},children:"Templates"}),(0,P.jsx)(d._,{only:["sm","base"],children:(0,P.jsxs)(l.Z,{alignSelf:"center",children:[(0,P.jsx)(u.ZP,{onPress:function(){t("/campaigns")},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(15),paddingTop:(0,y.vh)(40),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,y.vw)(25),paddingBottom:(0,y.vh)(13),borderBottomWidth:(0,y.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Campaigns"})}),(0,P.jsx)(u.ZP,{onPress:function(){t("/templates")},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(15),paddingTop:(0,y.vh)(40),paddingHorizontal:10,color:v.Z.primary,fontFamily:"Poppins_medium",marginHorizontal:(0,y.vw)(25),paddingBottom:(0,y.vh)(13),borderBottomWidth:(0,y.vh)(4),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Templates"})}),(0,P.jsx)(u.ZP,{onPress:function(){t("/signatures")},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(15),paddingTop:(0,y.vh)(40),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,y.vw)(25),paddingBottom:(0,y.vh)(13),borderBottomWidth:(0,y.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Signatures"})})]})}),(0,P.jsx)(l.Z,{style:{marginTop:(0,y.vh)(20),width:(0,y.vw)(300)},alignItems:"center",justifyContent:"flex-end",space:2,children:(0,P.jsx)(ee.default,{onPress:(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p||0!==p.length){e.next=4;break}j(!0),e.next=13;break;case 4:return e.prev=4,e.next=7,h({type:w.iZ,data:null});case 7:n(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),m("error",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])}))),label:"+ Create",style:{height:(0,y.vh)(36)}})})]}),(0,P.jsx)(d._,{from:"md",children:(0,P.jsxs)(l.Z,{alignSelf:"center",children:[(0,P.jsx)(u.ZP,{onPress:function(){t("/campaigns")},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(15),paddingTop:(0,y.vh)(20),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,y.vw)(10),paddingBottom:(0,y.vh)(13),borderBottomWidth:(0,y.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Campaigns"})}),(0,P.jsx)(u.ZP,{onPress:function(){t("/templates")},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(15),paddingTop:(0,y.vh)(20),paddingHorizontal:10,color:v.Z.primary,fontFamily:"Poppins_medium",marginHorizontal:(0,y.vw)(10),paddingBottom:(0,y.vh)(13),borderBottomWidth:(0,y.vh)(4),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Templates"})}),(0,P.jsx)(u.ZP,{onPress:function(){t("/signatures")},children:(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(15),paddingTop:(0,y.vh)(20),paddingHorizontal:10,color:"#303030",fontFamily:"Poppins_medium",marginHorizontal:(0,y.vw)(10),paddingBottom:(0,y.vh)(13),borderBottomWidth:(0,y.vh)(0),borderBottomColor:"rgba(125, 43, 233, 1)"},children:"Signatures"})})]})}),(0,P.jsx)($.default,{size:"md",isOpen:x,header:"Attention!",close:function(){j(!1)},buttons:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(ee.default,{space:2,onPress:function(){j(!1)},label:"Cancel",variant:"outline",color:v.Z.primary,style:{height:(0,y.vh)(36)}}),(0,P.jsx)(ee.default,{space:2,onPress:function(){t("/signatures")},label:"Add Signature",style:{height:(0,y.vh)(36)}})]}),children:(0,P.jsx)(c.Z,{style:{fontFamily:"Poppins",fontSize:(0,y.vw)(15),color:"rgba(0,0,0,0.8)"},children:"You need a signature to add a template"})})]})},he=function(e){var t=e.user,n=e.setLogout,l=(0,f.I0)(),d=(0,x.s0)(),u=(0,h.pm)(),w=(0,s.useState)(50),Z=(0,i.Z)(w,2),_=Z[0],S=Z[1],C=s.useState(!1),z=(0,i.Z)(C,2),R=z[0],k=z[1],I=(0,s.useState)("vertical"),T=(0,i.Z)(I,2),B=T[0],F=T[1],L=(0,s.useState)(!1),H=(0,i.Z)(L,2),O=H[0],E=H[1],G=(0,s.useState)(!1),q=(0,i.Z)(G,2),M=(q[0],q[1]),V=(0,s.useState)(!1),D=(0,i.Z)(V,2),J=D[0],X=D[1],Y=(0,s.useState)(!1),K=(0,i.Z)(Y,2),Q=K[0],U=K[1],te=(0,s.useState)(1),ne=(0,i.Z)(te,2),re=ne[0],se=ne[1],oe=(0,f.v9)((function(e){return e.templates})),le=oe.userTemplates,ce=oe.total,he=(0,f.v9)((function(e){return e.signatures.userSignatures})),me=(0,s.useState)({}),pe=(0,i.Z)(me,2),ge=pe[0],fe=pe[1],xe=(0,A.PR)(),ye=(0,s.useCallback)((function(e,t){u.show({placement:"top",render:function(){var n="red.300";return"error"===e?n="red.300":"success"===e?n="green.300":"info"===e?n="blueGray.300":"warning"===e&&(n="orange.300"),(0,P.jsx)(c.Z,{style:{fontSize:(0,y.vw)(12),fontFamily:"Poppins_medium",color:"#33214B"},p:2,bg:n,rounded:"full",children:t})}})}),[u]);(0,s.useEffect)((function(){(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(j.Qd(1,1e3));case 2:case"end":return e.stop()}}),e)})))()}),[l]);var ve=(0,s.useCallback)((0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(b.pK(re,_));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),ye("error",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),[l,ye,re,_,Q]);(0,s.useEffect)((function(){return E(!0),ve().then((function(){E(!1)})),function(){E(!1),M(!1)}}),[l,ve,Q,re,_]);var je=function(){return(0,P.jsx)(m.Z,{mt:250,flex:1,children:(0,P.jsx)(c.Z,{children:"No items found."})})},be=le.filter((function(e){return e.createdby===xe._id})),we=100-parseFloat((0,y.vh)(70))+"vh",Ze=Math.floor(window.screen.width/250);return 0===Ze&&(Ze=1),(0,P.jsxs)(o.Z,{minHeight:"100vh",bg:"white",flex:1,children:[(0,P.jsx)(N.default,{user:t,setLogout:n}),(0,P.jsxs)(o.Z,{height:we,children:[(0,P.jsx)(ue,{navigate:d,setListStyle:F,listStyle:B,setIsOpen:k,dispatch:l,_showAlert:ye,signatures:he}),O?(0,P.jsx)(m.Z,{flex:1,children:(0,P.jsx)(p.Z,{size:"small",color:v.Z.primary})}):(0,P.jsxs)(P.Fragment,{children:[1===Ze?(0,P.jsx)(g.O,{contentContainerStyle:{paddingBottom:20},ListEmptyComponent:(0,P.jsx)(je,{}),removeClippedSubviews:!0,data:be,keyExtractor:function(e){return e._id},renderItem:function(e){var t=e.item;return(0,P.jsx)(W,{cols:Ze,item:t,setIsOpen:k,setShowPreview:X,setTemplateOptions:fe})}},"list-"+Ze):(0,P.jsx)(g.O,{contentContainerStyle:{paddingBottom:20},ListEmptyComponent:(0,P.jsx)(je,{}),removeClippedSubviews:!0,data:be,keyExtractor:function(e){return e._id},renderItem:function(e){var t=e.item;return(0,P.jsx)(W,{cols:Ze,item:t,setIsOpen:k,setShowPreview:X,setTemplateOptions:fe})},columnWrapperStyle:{justifyContent:be.length>5?"space-between":"flex-start"},numColumns:5},"list-"+Ze),ce>_&&(0,P.jsx)(ie.Z,{limit:_,total:ce,page:re,setPage:se,setIsLoading:E,setLimit:S})]}),R&&(0,P.jsx)(ae,{refresh:Q,setRefresh:U,isOpen:R,setIsOpen:k}),J&&(0,P.jsx)($.default,{size:"md",header:"Preview",isOpen:J,close:function(){X(!1)},buttons:(0,P.jsx)(ee.default,{space:2,style:{height:(0,y.vh)(36)},color:v.Z.primary,variant:"outline",label:"Close",onPress:function(){X(!1)}}),children:(0,P.jsx)(de,{templateOption:ge})})]})]})}},69261:function(e,t,n){n.d(t,{Xc:function(){return c},Xu:function(){return d},pK:function(){return l}});var r=n(42982),a=n(74165),i=n(15861),s=n(4200),o=n(75247),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return function(){var n=(0,i.Z)((0,a.Z)().mark((function n(r,i){var l,c,d,u,h,m,p,g,f,x;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=(0,s.PR)(),c=l.team,d=l.token,u=i().campaigns.userCampaigns,h=u&&u.length>0&&u.find((function(e){return e.createdUser._id===c})),m={skip:1===e?0:(e-1)*t,limit:t},h&&(p=[],h&&h.steps&&h.steps.map((function(e){return e.emailtemplate&&p.push(e.emailtemplate),e.postcardtemplate&&p.push(e.postcardtemplate),e})),p.length>0&&(m.filter={templates:p})),n.prev=5,n.next=8,fetch("".concat(s.T5,"/templates/get"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+d},body:JSON.stringify(m)});case 8:if((g=n.sent).ok){n.next=14;break}return n.next=12,g.json();case 12:f=n.sent,console.log(f);case 14:return n.next=16,g.json();case 16:x=n.sent,r({type:o.N_,data:x.data?x.data:[],total:x.count?x.count:0}),n.next=24;break;case 20:throw n.prev=20,n.t0=n.catch(5),console.log("Error ",n.t0),n.t0;case 24:case"end":return n.stop()}}),n,null,[[5,20]])})));return function(e,t){return n.apply(this,arguments)}}()},c=function(e){return function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n,r){var i,l,c,d,u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=(0,s.PR)(),l=i.token,c=r().templates.userTemplates,t.next=5,fetch("".concat(s.T5,"/templates/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l},body:JSON.stringify({active:!1})});case 5:if((d=t.sent).ok){t.next=8;break}throw new Error("Something went wrong!");case 8:return t.next=10,d.json();case 10:if(!(u=t.sent).data){t.next=16;break}return c&&c.length>0&&(c=c.filter((function(e){return e._id!==u.data._id}))),t.next=15,n({type:o.N_,data:c});case 15:return t.abrupt("return",!0);case 16:return t.abrupt("return",!1);case 19:throw t.prev=19,t.t0=t.catch(0),console.log(t.t0),new Error(t.t0.message);case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,n){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n,i){var l,c,d,u,h,m,p,g,f,x;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=(0,s.PR)(),c=l.token,d=i().templates.userTemplates,u=e._id,h="".concat(s.T5,"/templates/add"),m="POST",u&&(h="".concat(s.T5,"/templates/").concat(u),delete e._id,m="PATCH"),t.prev=6,t.next=9,fetch(h,{method:m,headers:{"Content-Type":"application/json",Authorization:"Bearer "+c},body:JSON.stringify(e)});case 9:if((p=t.sent).ok){t.next=17;break}return t.next=13,p.json();case 13:throw g=t.sent,f="Something went wrong!",g&&g.error&&(f=g.error),new Error(f);case 17:return t.next=19,p.json();case 19:(x=t.sent).data&&(d=u?d.map((function(e){return e._id===x.data._id&&(e=x.data),e})):[].concat((0,r.Z)(d),[x.data]),n({type:o.N_,data:d})),t.next=27;break;case 23:throw t.prev=23,t.t0=t.catch(6),console.log(t.t0),new Error(t.t0.message);case 27:case"end":return t.stop()}}),t,null,[[6,23]])})));return function(e,n){return t.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=3010.71e63b8a.chunk.js.map